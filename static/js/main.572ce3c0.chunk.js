(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),o=n.n(l),i=(n(17),n(6)),u=n(1),c=n(2),s=n(4),h=n(3),d=n(5),v=(n(8),n(7)),f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(u.a)(this,e),this.row=[],this.column=[],this.block=[],this.value=t,this.options=[],this.locked=!1},m=function(){function e(t){Object(u.a)(this,e),this.dim=t;var n=this.sqrt=Math.pow(t,.5);this.rows=new Array(t).fill().map(function(e){return new Array(t).fill(0)}),this.columns=new Array(t).fill().map(function(e){return new Array(t).fill(0)}),this.blocks=new Array(t).fill().map(function(e){return new Array(t).fill(0)}),this.all=new Array(Math.pow(t,2)).fill(0);for(var a=0;a<t;a++)for(var r=0;r<t;r++){var l=new f;this.rows[a][r]=l,l.row=this.rows[a],this.columns[r][a]=l,l.column=this.columns[r],this.blocks[a-a%n+(r-r%n)/n][a%n*n+r%n]=l,l.block=this.blocks[a-a%n+(r-r%n)/n],this.all[a*t+r]=l}}return Object(c.a)(e,[{key:"backup",value:function(){this.backupState=this.all.map(function(e){return e.value})}},{key:"rollback",value:function(){var e=this;this.all.map(function(t,n){return t.value=e.backupState[n]})}},{key:"solve",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(this.dim,1),n=arguments.length>1?arguments[1]:void 0;this.backup(),n||this.all.filter(function(e){return!e.locked}).forEach(function(e){return e.value=0});for(var a=-1,r=1,l={},o=function(){if(a+=r,!(l=e.all[a])||l.locked)return"continue";var n=l.value,o=t.indexOf(n);do{n=t[++o]}while(o<t.length&&(l.block.some(function(e){return e.value===n})||l.row.some(function(e){return e.value===n})||l.column.some(function(e){return e.value===n})));o<t.length?(l.value=n,r=1):(l.value=0,r=-1)};l;)o();return-1===a&&this.rollback(),a>-1}},{key:"isSolvable",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(this.dim,1);this.backup();for(var n=-1,a=1,r={},l=function(){if(n+=a,!(r=e.all[n])||r.locked)return"continue";var l=r.value,o=t.indexOf(l);do{l=t[++o]}while(o<t.length&&(r.block.some(function(e){return e.value===l})||r.row.some(function(e){return e.value===l})||r.column.some(function(e){return e.value===l})));o<t.length?(r.value=l,a=1):(r.value=0,a=-1)};r;)l();if(-1===n)return this.rollback(),!1;a=-1,r={};for(var o=function(){if(n+=a,!(r=e.all[n])||r.locked)return"continue";var l=r.value,o=t.indexOf(l);do{l=t[++o]}while(o<t.length&&(r.block.some(function(e){return e.value===l})||r.row.some(function(e){return e.value===l})||r.column.some(function(e){return e.value===l})));o<t.length?(r.value=l,a=1):(r.value=0,a=-1)};r;)o();return this.rollback(),-1===n&&!0}},{key:"shuffle_test",value:function(){var e=k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,this.dim);this.all.forEach(function(e){e.locked=!1,e.value=0});var t=p(b(this.dim,1));this.solve(t,!0);var n,a=Math.pow(this.dim,2),r=p(b(a));this.all.forEach(function(e){return e.locked=!0});var l=[];for(n=a-1;n>=e;n--){var o=this.all[r[n]];l.push(o.value),o.locked=!1,o.value=0}n++;for(var i=0;!this.isSolvable(t);)this.all[r[n]].value=l.pop(),i++;i>0&&(console.warn("Shuffle could not stand up to expectations: expected ".concat(e," visibleCells, got down to ").concat(e-i," visible cells")),window.currVisible=e-i)}},{key:"shuffle",value:function(){var e=k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,this.dim);this.all.forEach(function(e){e.locked=!1,e.value=0});var t=p(b(this.dim,1));window.priority=t,this.solve(t,!0),this.all.forEach(function(e){return e.locked=!0});var n,a,r,l=Math.pow(this.dim,2),o=p(b(l)),i=l,u=0;do{do{n=(a=this.all[o[u]]).value,a.value=0,a.locked=!1,u++,i--,r=this.isSolvable(t)}while(r&&i>e&&u<l);r||(i++,a.value=n,a.locked=!0)}while(i>e&&u<l);i>e&&(console.warn("Shuffle could not stand up to expectations: expected ".concat(e," visibleCells, got down to ").concat(i," visible cells")),window.currVisible=i)}}]),e}();function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array(e).fill().map(function(e,n){return n+t})}function p(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*e.length-t)+t,a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}var g={4:{1:8,2:7,3:6,4:5,5:4},9:{1:40,2:35,3:30,4:25,5:22},16:{1:180,2:160,3:140,4:120,5:103}};function k(e,t){return g[t][e]}m.Cell=f;var w=m,E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={board:function(){var e=new w(n.props.dim);return e.shuffle(),e.all.forEach(function(e){e.state={highlightedCell:!1,highlightedNumber:!1}}),e}(),optionsMode:!1},n.isEnded=!1,n.fullCounter=n.state.board.all.filter(function(e){return e.value}).length,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.board,n=t.sqrt;window.board=t;var a=r.a.createElement("div",{className:"App-header"},r.a.createElement("div",null,r.a.createElement("p",{hidden:!this.state.error},this.state.error)),r.a.createElement("div",null,S(n).map(function(a){return r.a.createElement("div",{style:{display:"flex"}},S(n).map(function(l){return r.a.createElement("div",{className:"Board-Block"},S(n).map(function(o){return r.a.createElement("div",{style:{display:"flex"}},S(n).map(function(r){var i=t.blocks[a*n+l][o*n+r];return e.state.optionsMode?e.getOptionsCell(i):e.getNumberCell(i)}))}))}))})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{className:"Buttons btn-green",onClick:function(){t.solve()?e.setState({board:t}):e.setState({board:t,error:"Cannot be solved!"})}},"Solve"),r.a.createElement("button",{className:"Buttons btn-yellow",onClick:function(){t.all.filter(function(e){return!e.locked}).forEach(function(e){return e.value=0}),t.all.forEach(function(e){e.state={highlightedCell:!1,highlightedNumber:!1}}),e.setState({board:t})}},"Reset"),r.a.createElement("button",{className:"Buttons btn-red",onClick:function(){e.props.onExit()}},"Exit")));return delete this.state.error,a}},{key:"getNumberCell",value:function(e){var t=this,n=this.state.board;return r.a.createElement("input",{type:"text",maxLength:"2",readOnly:this.isEnded||e.locked,className:"Cell",style:{backgroundColor:e.locked?"#A7A7B4":e.state.highlightedCell?"rgba(255,255,255,0.8)":"",color:e.state.highlightedNumber?"blue":"",fontWeight:e.state.highlightedNumber?"bolder":"bold"},value:e.value||"",onFocus:function(a){C(e),t.setState(t.state),y(e,n),e.locked||a.target.setSelectionRange(0,a.target.value.length)},onBlur:function(){O(e),y(e,n),t.setState(t.state)},onChange:function(a){var r=Number(a.target.value||0);r>=0&&r<=t.props.dim&&(!!e.value!==!!r&&(t.fullCounter+=r?1:-1,t.fullCounter===Math.pow(n.dim,2)&&(N(n)?(t.setState({board:n,error:"You Won!"}),t.isEnded=!0):(t.setState({board:n,error:"Wrong!"}),t.isEnded=!0))),e.value=r,t.setState({board:n})),y(e,n)}})}},{key:"getOptionsCell",value:function(e){var t=this,n=this.state.board;return r.a.createElement("input",{type:"text",maxLength:"2",readOnly:this.isEnded||e.locked,className:"Cell",style:{backgroundColor:e.locked?"#A7A7B4":e.state.highlightedCell?"rgba(255,255,255,0.8)":"",color:e.state.highlightedNumber?"blue":"",fontWeight:e.state.highlightedNumber?"bolder":"bold"},value:e.value||"",onFocus:function(a){C(e),t.setState(t.state),y(e,n),e.locked||a.target.setSelectionRange(0,a.target.value.length)},onBlur:function(){O(e),y(e,n),t.setState(t.state)},onChange:function(a){var r=Number(a.target.value||0);r>=0&&r<=t.props.dim&&(!!e.value!==!!r&&(t.fullCounter+=r?1:-1,t.fullCounter===Math.pow(n.dim,2)&&(N(n)?(t.setState({board:n,error:"You Won!"}),t.isEnded=!0):(t.setState({board:n,error:"Wrong!"}),t.isEnded=!0))),e.value=r,t.setState({board:n})),y(e,n)}})}}]),t}(a.Component);function y(e,t){t.all.forEach(function(t){t.state.highlightedNumber=e.value===t.value})}function C(e){e.row.forEach(function(e){return e.state.highlightedCell=!0}),e.column.forEach(function(e){return e.state.highlightedCell=!0})}function O(e){e.row.forEach(function(e){return e.state.highlightedCell=!1}),e.column.forEach(function(e){return e.state.highlightedCell=!1})}function S(e){return Object(v.a)(Array(e).keys())}function N(e){return e.rows.every(function(t){return new Set(t.map(function(e){return e.value})).size===e.dim})&&e.columns.every(function(t){return new Set(t.map(function(e){return e.value})).size===e.dim})&&e.blocks.every(function(t){return new Set(t.map(function(e){return e.value})).size===e.dim})}var x=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={dim:n.props.dim},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=new w(this.state.dim),n=t.sqrt;return r.a.createElement("div",{className:"App-header"},r.a.createElement("button",{className:"Buttons",onClick:function(){var t=Object(i.a)({},e.state,{page:"new game"});e.setState(t),e.props.onChange(t)}},"New Game"),r.a.createElement("button",{className:"Buttons",onClick:function(){var t=Object(i.a)({},e.state,{page:"solver"});e.setState(t),e.props.onChange(t)}},"Solver"),r.a.createElement("select",{className:"Buttons",defaultValue:"9",onInput:function(t){e.setState(Object(i.a)({},e.state,{dim:Number(t.target.value)}))}},r.a.createElement("option",{value:"4"},"4x4"),r.a.createElement("option",{value:"9"},"9x9"),r.a.createElement("option",{value:"16"},"16x16")),r.a.createElement("div",null,j(n).map(function(e){return r.a.createElement("div",{style:{display:"flex"}},j(n).map(function(a){return r.a.createElement("div",{className:"Board-Block"},j(n).map(function(l){return r.a.createElement("div",{style:{display:"flex"}},j(n).map(function(o){var i=t.blocks[e*n+a][l*n+o];return r.a.createElement("input",{type:"text",maxLength:"2",readOnly:!0,className:"Cell-Mini",value:i.value||""})}))}))}))})))}}]),t}(a.Component);function j(e){return Object(v.a)(Array(e).keys())}var A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={board:new w(n.props.dim)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.board,n=t.sqrt;window.board=t;var a=r.a.createElement("div",{className:"App-header"},r.a.createElement("div",null,r.a.createElement("p",{hidden:!this.state.error},this.state.error)),r.a.createElement("div",null,B(n).map(function(a){return r.a.createElement("div",{style:{display:"flex"}},B(n).map(function(l){return r.a.createElement("div",{className:"Board-Block"},B(n).map(function(o){return r.a.createElement("div",{style:{display:"flex"}},B(n).map(function(i){var u=t.blocks[a*n+l][o*n+i];return r.a.createElement("input",{type:"text",maxLength:"2",className:"Cell",style:{backgroundColor:u.locked?"gray":"",borderColor:u.locked?"gray":""},value:u.value||"",onChange:function(n){var a=Number(n.target.value||0);a>=0&&a<=e.props.dim&&(u.value=a,u.locked=!!u.value,e.setState({board:t}))}})}))}))}))})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{className:"Buttons btn-green",onClick:function(){t.solve()?e.setState({board:t}):e.setState({board:t,error:"Cannot be solved!"})}},"Solve"),r.a.createElement("button",{className:"Buttons btn-yellow",onClick:function(){e.setState({board:new w(e.props.dim)})}},"Reset"),r.a.createElement("button",{className:"Buttons btn-red",onClick:function(){e.props.onExit()}},"Exit")));return delete this.state.error,a}}]),t}(a.Component);function B(e){return Object(v.a)(Array(e).keys())}var M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={dim:9,page:"menu"},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},function(e,t){switch(e.page){case"new game":return r.a.createElement(E,{dim:e.dim,onExit:function(){return t(Object(i.a)({},e,{page:"menu"}))}});case"menu":return r.a.createElement(x,{dim:e.dim,onChange:t});case"solver":return r.a.createElement(A,{dim:e.dim,onExit:function(){return t(Object(i.a)({},e,{page:"menu"}))}})}}(this.state,function(t){return e.setState(t)})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.572ce3c0.chunk.js.map